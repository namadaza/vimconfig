local autocmd = vim.api.nvim_create_autocmd

-- Auto resize panes when resizing nvim window
-- autocmd("VimResized", {
--   pattern = "*",
--   command = "tabdo wincmd =",
-- })

autocmd("BufWritePre", {
  pattern = "*",
  callback = function()
    vim.lsp.buf.format { async = false, timeout_ms = 5000 }
  end,
})

vim.api.nvim_create_user_command("DiagnosticToggle", function()
  local config = vim.diagnostic.config
  local vt = config().virtual_text
  config {
    virtual_text = not vt,
    underline = not vt,
    signs = not vt,
  }
end, { desc = "toggle diagnostic" })

vim.g.copilot_assume_mapped = true

vim.g.copilot_filetypes = { markdown = true, terraform = true, yaml = true, Dockerfile = true }

vim.opt.relativenumber = true

vim.filetype.add {
  extension = {
    mdx = "mdx",
  },
}

vim.treesitter.language.register("markdown", "mdx")
